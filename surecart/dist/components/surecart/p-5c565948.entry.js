import{r as e,h as s}from"./p-e97fde0a.js";import{a}from"./p-dd3464cd.js";import"./p-401e165e.js";import"./p-d3366af3.js";const d=":host{display:block;position:relative}";const t=d;const r=class{constructor(s){e(this,s);this.heading=undefined;this.successUrl=undefined;this.user=undefined;this.loading=undefined;this.error=undefined;this.enableValidation=true}renderEmpty(){return s("slot",{name:"empty"},wp.i18n.__("User not found.","surecart"))}validatePassword(e){const s=new RegExp("^(?=.*?[#?!@$%^&*-]).{6,}$");if(s.test(e))return true;return false}async handleSubmit(e){this.loading=true;this.error="";try{const{password:s}=await e.target.getFormJson();await a({path:`wp/v2/users/me`,method:"PATCH",data:{password:s,meta:{default_password_nag:false}}});if(this.successUrl){window.location.assign(this.successUrl)}else{this.loading=false}}catch(e){this.error=(e===null||e===void 0?void 0:e.message)||wp.i18n.__("Something went wrong","surecart");this.loading=false}}render(){return s("sc-dashboard-module",{key:"86bd38dff33fdf158717ed5b82e902e39a0c91e3",class:"customer-details",error:this.error},s("span",{key:"314d4796a60ee2a836e84e7331c882981bbaa9ac",slot:"heading"},this.heading||wp.i18n.__("Update Password","surecart")," "),s("slot",{key:"60a1b840112fdefc6ffd31d7137b17cf53690590",name:"end",slot:"end"}),s("sc-card",{key:"5838fc46f9d6c9f0fbadaace7daef75ca6271ea1"},s("sc-form",{key:"921b186b07c093217ed7c838cb02763957d8e677",onScFormSubmit:e=>this.handleSubmit(e)},s("sc-password",{key:"9d8e66381add0e2d0371883c68faf3f6f49a94cb",enableValidation:this.enableValidation,label:wp.i18n.__("New Password","surecart"),name:"password",confirmation:true,required:true}),s("div",{key:"8ef0a2af206d4b6ea2ac5b9c6db418d1d3dd5a50"},s("sc-button",{key:"2d3be1e6f49d25fdbcc4b8b97e9afc52a1b587dd",type:"primary",full:true,submit:true},wp.i18n.__("Update Password","surecart"))))),this.loading&&s("sc-block-ui",{key:"76f3f8a7318499acfc8dbd60acb2c2b61147a4d0",spinner:true}))}};r.style=t;export{r as sc_wordpress_password_edit};
//# sourceMappingURL=p-5c565948.entry.js.map