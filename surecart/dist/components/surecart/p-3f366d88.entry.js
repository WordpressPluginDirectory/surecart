import{r as t,c as i,h as e,a as s,H as o,F as n}from"./p-e97fde0a.js";import{g as r,c as a}from"./p-30eb50ff.js";import{r as l,F as c}from"./p-8b323bfb.js";import{i as d}from"./p-b0d8cd6e.js";import{a as h}from"./p-0b0c03f7.js";import{s as u}from"./p-830ab1a3.js";import{z as p}from"./p-e677365e.js";import"./p-401e165e.js";const b=":host{display:block}.sc-address{display:block;position:relative}.sc-address [hidden]{display:none}.sc-address--loading{min-height:230px}.sc-address sc-skeleton{display:block;margin-bottom:1em}.sc-address__control{display:block}.sc-address__control>*{margin-bottom:var(--sc-address-column-spacing, -1px)}.sc-address__columns{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;justify-content:space-between}.sc-address__columns>*{flex:1;width:50%;margin-right:var(--sc-address-column-spacing, -1px)}.sc-address__columns>*:last-child{margin-right:0}";const v=b;const f=[{name:"country",priority:30,label:wp.i18n.__("Country","surecart")},{name:"name",priority:40,label:wp.i18n.__("Name or Company Name","surecart")},{name:"line_1",priority:50,label:wp.i18n.__("Address","surecart")},{name:"line_2",priority:60,label:wp.i18n.__("Line 2","surecart")},{name:"city",priority:70,label:wp.i18n.__("City","surecart")},{name:"state",priority:80,label:wp.i18n.__("State / County","surecart")},{name:"postal_code",priority:90,label:wp.i18n.__("Postal Code","surecart")}];const m=class{constructor(e){t(this,e);this.scChangeAddress=i(this,"scChangeAddress",7);this.scInputAddress=i(this,"scInputAddress",7);this.address={country:null,city:null,line_1:null,line_2:null,postal_code:null,state:null};this.names={name:"shipping_name",country:"shipping_country",city:"shipping_city",line_1:"shipping_line_1",line_2:"shipping_line_2",postal_code:"shipping_postal_code",state:"shipping_state"};this.loading=false;this.disabled=undefined;this.label=undefined;this.showName=undefined;this.showLine2=undefined;this.required=false;this.requireName=false;this.showCity=true;this.showPostal=true;this.countryDetails=null;this.countryChoices=undefined}async handleAddressChange(){var t,i;if(!((t=this.address)===null||t===void 0?void 0:t.country))return;if(!this.countryDetails||((i=this.countryDetails)===null||i===void 0?void 0:i.code)!==this.address.country){this.countryDetails=await r(this.address.country)}this.scChangeAddress.emit(this.address);this.scInputAddress.emit(this.address)}handleNameChange(){if(this.requireName){this.showName=true}}decodeHtmlEntities(t){var i;return((i=(new DOMParser).parseFromString(t,"text/html"))===null||i===void 0?void 0:i.body.textContent)||t}updateAddress(t){this.address={...this.address,...t}}handleAddressInput(t){this.scInputAddress.emit({...this.address,...t})}clearAddress(){var t;this.address={name:(t=this.address)===null||t===void 0?void 0:t.name,country:null,city:null,line_1:null,line_2:null,postal_code:null,state:null}}componentWillLoad(){this.initCountryChoices();this.handleAddressChange();this.handleNameChange()}async initCountryChoices(){var t,i;this.countryChoices=await a();const e=((i=(t=this.countryChoices)===null||t===void 0?void 0:t.find((t=>{var i;return t.value===((i=this.address)===null||i===void 0?void 0:i.country)})))===null||i===void 0?void 0:i.value)||null;this.updateAddress({country:e})}async reportValidity(){return l(this.el)}sortedFields(){var t,i,e,s;if(!this.countryDetails||!((t=this===null||this===void 0?void 0:this.address)===null||t===void 0?void 0:t.country)){return f}return((s=(e=(i=this===null||this===void 0?void 0:this.countryDetails)===null||i===void 0?void 0:i.address_formats)===null||e===void 0?void 0:e.edit)===null||s===void 0?void 0:s.match(/{{([^}]+)}}/g).map((t=>t.slice(2,-2))).map((t=>{var i,e,s;return{name:t,label:((e=(i=this===null||this===void 0?void 0:this.countryDetails)===null||i===void 0?void 0:i.address_labels)===null||e===void 0?void 0:e[t])||((s=f===null||f===void 0?void 0:f.find((i=>(i===null||i===void 0?void 0:i.name)===t)))===null||s===void 0?void 0:s.label)}})))||[]}regions(){var t,i,e,s,o;let n=((i=(t=this===null||this===void 0?void 0:this.countryDetails)===null||t===void 0?void 0:t.states)===null||i===void 0?void 0:i.map((t=>({value:t===null||t===void 0?void 0:t.code,label:t===null||t===void 0?void 0:t.name}))))||[];if((s=(e=window===null||window===void 0?void 0:window.wp)===null||e===void 0?void 0:e.hooks)===null||s===void 0?void 0:s.applyFilters){n=window.wp.hooks.applyFilters("surecart_address_regions",n,(o=this===null||this===void 0?void 0:this.address)===null||o===void 0?void 0:o.country)}return n}getRoundedProps(t,i){const e=t===0;const s=t===i-1;return{squaredTop:s,squaredBottom:e,squared:!s&&!e}}render(){var t,i;const s=(i=(t=this.sortedFields())!==null&&t!==void 0?t:[])===null||i===void 0?void 0:i.filter((t=>{var i,e,s,o;switch(t.name){case"name":return this.showName;case"line_2":return this.showLine2||!!((e=(i=this===null||this===void 0?void 0:this.address)===null||i===void 0?void 0:i.line_2)===null||e===void 0?void 0:e.length);case"city":return this.showCity;case"state":return!!((s=this===null||this===void 0?void 0:this.regions())===null||s===void 0?void 0:s.length)&&!!((o=this===null||this===void 0?void 0:this.address)===null||o===void 0?void 0:o.country);case"postal_code":return this.showPostal;default:return true}}));return e("div",{class:"sc-address",part:"base"},e("sc-form-control",{label:this.label,exportparts:"label, help-text, form-control",class:"sc-address__control",required:this.required},s.map(((t,i)=>{var o,n,r,a,l,c,d,h,u,p,b,v,f,m,g;const _=this.getRoundedProps(i,s.length);switch(t.name){case"country":return e("sc-select",{exportparts:"base:select__base, input, form-control, label, help-text, trigger, panel, caret, search__base, search__input, search__form-control, menu__base, spinner__base, empty",part:"name__input",value:(o=this.address)===null||o===void 0?void 0:o.country,onScChange:t=>{var i;if(t.target.value===((i=this.address)===null||i===void 0?void 0:i.country))return;this.clearAddress();this.updateAddress({country:t.target.value})},choices:this.countryChoices,autocomplete:"country-name",placeholder:t.label,name:(n=this.names)===null||n===void 0?void 0:n.country,search:true,unselect:false,disabled:this.disabled,required:this.required,"aria-label":t.label,..._});case"name":return e("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",value:(r=this===null||this===void 0?void 0:this.address)===null||r===void 0?void 0:r.name,onScChange:t=>this.updateAddress({name:t.target.value||null}),onScInput:t=>this.handleAddressInput({name:t.target.value||null}),autocomplete:"street-address",placeholder:t.label,name:(a=this.names)===null||a===void 0?void 0:a.name,disabled:this.disabled,required:this.requireName,"aria-label":t.label,..._});case"line_1":return e("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",value:(l=this===null||this===void 0?void 0:this.address)===null||l===void 0?void 0:l.line_1,onScChange:t=>this.updateAddress({line_1:t.target.value||null}),onScInput:t=>this.handleAddressInput({line_1:t.target.value||null}),autocomplete:"street-address",placeholder:t.label,name:(c=this.names)===null||c===void 0?void 0:c.line_1,disabled:this.disabled,required:this.required,"aria-label":t.label,..._});case"line_2":return e("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",value:(d=this===null||this===void 0?void 0:this.address)===null||d===void 0?void 0:d.line_2,onScChange:t=>this.updateAddress({line_2:t.target.value||null}),onScInput:t=>this.handleAddressInput({line_2:t.target.value||null}),autocomplete:"street-address",placeholder:t.label,name:(h=this.names)===null||h===void 0?void 0:h.line_2,disabled:this.disabled,"aria-label":t.label,..._});case"city":return e("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",placeholder:t.label,name:(u=this.names)===null||u===void 0?void 0:u.city,value:(p=this===null||this===void 0?void 0:this.address)===null||p===void 0?void 0:p.city,onScChange:t=>this.updateAddress({city:t.target.value||null}),onScInput:t=>this.handleAddressInput({city:t.target.value||null}),required:this.required,disabled:this.disabled,"aria-label":t.label,..._});case"state":return e("sc-select",{exportparts:"base:select__base, input, form-control, label, help-text, trigger, panel, caret, search__base, search__input, search__form-control, menu__base, spinner__base, empty",placeholder:t.label,name:(b=this.names)===null||b===void 0?void 0:b.state,autocomplete:"address-level1",value:(v=this===null||this===void 0?void 0:this.address)===null||v===void 0?void 0:v.state,onScChange:t=>{var i;return this.updateAddress({state:t.target.value||((i=t.detail)===null||i===void 0?void 0:i.value)||null})},choices:this.regions(),required:this.required,disabled:this.disabled,search:true,"aria-label":t.label,..._});case"postal_code":return e("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",placeholder:t.label,name:(f=this.names)===null||f===void 0?void 0:f.postal_code,onScChange:t=>this.updateAddress({postal_code:t.target.value||null}),onScInput:t=>this.handleAddressInput({postal_code:t.target.value||null}),autocomplete:"postal-code",required:this.required,value:(m=this===null||this===void 0?void 0:this.address)===null||m===void 0?void 0:m.postal_code,disabled:this.disabled,maxlength:((g=this.address)===null||g===void 0?void 0:g.country)==="US"?5:null,"aria-label":t.label,..._});default:return null}}))),this.loading&&e("sc-block-ui",{exportparts:"base:block-ui, content:block-ui__content"}))}get el(){return s(this)}static get watchers(){return{address:["handleAddressChange"],requireName:["handleNameChange"]}}};m.style=v;const g=':host{display:block}.checkbox{display:flex;font-family:var(--sc-input-font-family);font-size:var(--sc-input-font-size-medium);font-weight:var(--sc-input-font-weight);color:var(--sc-input-color);vertical-align:middle;cursor:pointer}.checkbox__control{flex:0 0 auto;position:relative;display:inline-flex;align-items:center;justify-content:center;width:var(--sc-checkbox-size);height:var(--sc-checkbox-size);border:solid var(--sc-input-border-width) var(--sc-input-border-color);border-radius:2px;background-color:var(--sc-input-background-color);color:var(--sc-color-white);transition:var(--sc-input-transition, var(--sc-transition-medium)) border-color, var(--sc-input-transition, var(--sc-transition-medium)) opacity, var(--sc-input-transition, var(--sc-transition-medium)) background-color, var(--sc-input-transition, var(--sc-transition-medium)) color, var(--sc-input-transition, var(--sc-transition-medium)) box-shadow}.checkbox__control input[type=checkbox]{position:absolute;opacity:0;padding:0;margin:0;pointer-events:none}.checkbox__control .checkbox__icon{display:inline-flex;width:var(--sc-checkbox-size);height:var(--sc-checkbox-size)}.checkbox__control .checkbox__icon svg{width:100%;height:100%}.checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control:hover{border-color:var(--sc-input-border-color-hover);background-color:var(--sc-input-background-color-hover)}.checkbox.checkbox--focused:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control{border-color:var(--sc-input-border-color-focus);background-color:var(--sc-input-background-color-focus);box-shadow:0 0 0 var(--sc-focus-ring-width) var(--sc-focus-ring-color-primary)}.checkbox--checked .checkbox__control,.checkbox--indeterminate .checkbox__control{border-color:var(--sc-color-primary-500);background-color:var(--sc-color-primary-500)}.checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__control:hover,.checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__control:hover{opacity:0.8}.checkbox.checkbox--checked:not(.checkbox--disabled).checkbox--focused .checkbox__control,.checkbox.checkbox--indeterminate:not(.checkbox--disabled).checkbox--focused .checkbox__control{border-color:var(--sc-color-white);background-color:var(--sc-color-primary-500);box-shadow:0 0 0 var(--sc-focus-ring-width) var(--sc-focus-ring-color-primary)}.checkbox--disabled{opacity:0.5;cursor:not-allowed}.checkbox__label{line-height:var(--sc-checkbox-size);margin-top:var(--sc-input-border-width);margin-left:0.5em;flex:1}.checkbox--is-required .checkbox__label:after{content:" *";color:var(--sc-color-danger-500)}::slotted(*){display:inline-block}.checkbox--is-rtl .checkbox__label{margin-left:0;margin-right:0.5em}';const _=g;let x=0;const k=class{constructor(e){t(this,e);this.scBlur=i(this,"scBlur",7);this.scChange=i(this,"scChange",7);this.scFocus=i(this,"scFocus",7);this.inputId=`checkbox-${++x}`;this.labelId=`checkbox-label-${x}`;this.hasFocus=false;this.name=undefined;this.value=undefined;this.disabled=false;this.edit=false;this.required=false;this.checked=false;this.indeterminate=false;this.invalid=false}firstUpdated(){this.input.indeterminate=this.indeterminate}async triggerClick(){return this.input.click()}async triggerFocus(t){return this.input.focus(t)}async triggerBlur(){return this.input.blur()}async reportValidity(){this.invalid=!this.input.checkValidity();return this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t);this.invalid=!this.input.checkValidity()}handleClick(){this.checked=!this.checked;this.indeterminate=false}handleBlur(){this.hasFocus=false;this.scBlur.emit()}handleFocus(){this.hasFocus=true;this.scFocus.emit()}handleLabelMouseDown(){this.input.focus()}handleStateChange(){this.input.checked=this.checked;this.input.indeterminate=this.indeterminate;this.scChange.emit()}componentDidLoad(){this.formController=new c(this.el,{value:t=>t.checked?t.value:undefined}).addFormData()}disconnectedCallback(){var t;(t=this.formController)===null||t===void 0?void 0:t.removeFormData()}render(){const t=this.edit?"div":"label";return e(t,{key:"95fe15ddaa8e032b7cd9f7ef68d7a7904775e7ee",part:"base",class:{checkbox:true,"checkbox--is-required":this.required,"checkbox--checked":this.checked,"checkbox--disabled":this.disabled,"checkbox--focused":this.hasFocus,"checkbox--indeterminate":this.indeterminate,"checkbox--is-rtl":d()},htmlFor:this.inputId,onMouseDown:()=>this.handleLabelMouseDown()},e("span",{key:"b6cbf51f0b29134944298de88e6aab9acb855da1",part:"control",class:"checkbox__control"},this.checked?e("span",{part:"checked-icon",class:"checkbox__icon"},e("svg",{viewBox:"0 0 16 16"},e("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","stroke-linecap":"round"},e("g",{stroke:"currentColor","stroke-width":"2"},e("g",{transform:"translate(3.428571, 3.428571)"},e("path",{d:"M0,5.71428571 L3.42857143,9.14285714"}),e("path",{d:"M9.14285714,0 L3.42857143,9.14285714"})))))):"",!this.checked&&this.indeterminate?e("span",{part:"indeterminate-icon",class:"checkbox__icon"},e("svg",{viewBox:"0 0 16 16"},e("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","stroke-linecap":"round"},e("g",{stroke:"currentColor","stroke-width":"2"},e("g",{transform:"translate(2.285714, 6.857143)"},e("path",{d:"M10.2857143,1.14285714 L1.14285714,1.14285714"})))))):"",e("input",{key:"9132a7cad1df4e1985e11f20c7067d8154e2b7c6",id:this.inputId,ref:t=>this.input=t,type:"checkbox",name:this.name,value:this.value,checked:this.checked,disabled:this.disabled,required:this.required,role:"checkbox","aria-checked":this.checked?"true":"false","aria-labelledby":this.labelId,onClick:()=>this.handleClick(),onBlur:()=>this.handleBlur(),onFocus:()=>this.handleFocus()})),e("span",{key:"67b5a6f149ef03aaee4cba11b8c21218c979bc11",part:"label",id:this.labelId,class:"checkbox__label"},e("slot",{key:"c63656f7f6a308092fc48726b5f7675da51a2ab7"})))}get el(){return s(this)}static get watchers(){return{checked:["handleStateChange"],indeterminate:["handleStateChange"]}}};k.style=_;const y=":host{--focus-ring:0 0 0 var(--sc-focus-ring-width) var(--sc-focus-ring-color-primary);display:block;position:relative}:host([invalid]) .input,:host([invalid]) .input:hover:not(.input--disabled),:host([invalid]) .input--focused:not(.input--disabled){border-color:var(--sc-input-border-color-invalid);box-shadow:0 0 0 var(--sc-focus-ring-width) var(--sc-input-border-color-invalid)}.input__control[type=number]{-moz-appearance:textfield}.input__control::-webkit-outer-spin-button,.input__control::-webkit-inner-spin-button{-webkit-appearance:none}.input{flex:1 1 auto;display:inline-flex;align-items:center;justify-content:start;position:relative;width:100%;box-sizing:border-box;font-family:var(--sc-input-font-family);font-weight:var(--sc-input-font-weight);letter-spacing:var(--sc-input-letter-spacing);background-color:var(--sc-input-background-color);border:solid 1px var(--sc-input-border-color, var(--sc-input-border));vertical-align:middle;box-shadow:var(--sc-input-box-shadow);transition:var(--sc-transition-fast) color, var(--sc-transition-fast) border, var(--sc-transition-fast) box-shadow;cursor:text}.input:hover:not(.input--disabled){background-color:var(--sc-input-background-color-hover);border-color:var(--sc-input-border-color-hover);z-index:7}.input:hover:not(.input--disabled) .input__control{color:var(--sc-input-color-hover)}.input.input--focused:not(.input--disabled){background-color:var(--sc-input-background-color-focus);border-color:var(--sc-input-border-color-focus);box-shadow:var(--focus-ring);z-index:8}.input.input--focused:not(.input--disabled) .input__control{color:var(--sc-input-color-focus)}.input.input--disabled{background-color:var(--sc-input-background-color-disabled);border-color:var(--sc-input-border-color-disabled);opacity:0.5;cursor:not-allowed}.input.input--disabled .input__control{color:var(--sc-input-color-disabled)}.input.input--disabled .input__control::placeholder{color:var(--sc-input-placeholder-color-disabled)}.input__control{flex:1 1 auto;font-family:inherit;font-size:inherit;font-weight:inherit;min-width:0;height:100%;color:var(--sc-input-color);border:none;background:none;box-shadow:none;padding:0;margin:0;cursor:inherit;-webkit-appearance:none}.input__control::-webkit-search-decoration,.input__control::-webkit-search-cancel-button,.input__control::-webkit-search-results-button,.input__control::-webkit-search-results-decoration{-webkit-appearance:none}.input__control:-webkit-autofill,.input__control:-webkit-autofill:hover,.input__control:-webkit-autofill:focus,.input__control:-webkit-autofill:active{box-shadow:0 0 0 var(--sc-input-height-large) var(--sc-input-background-color-hover) inset !important;-webkit-text-fill-color:var(--sc-input-color)}.input__control::placeholder{color:var(--sc-input-placeholder-color);user-select:none}.input__control:focus{outline:none}.input__prefix,.input__suffix{display:inline-flex;flex:0 0 auto;align-items:center;color:var(--sc-input-color);cursor:default}.input__prefix ::slotted(sc-icon),.input__suffix ::slotted(sc-icon){color:var(--sc-input-icon-color)}.input--small{border-radius:var(--sc-input-border-radius-small);font-size:var(--sc-input-font-size-small);height:var(--sc-input-height-small)}.input--small .input__control{height:calc(var(--sc-input-height-small) - var(--sc-input-border-width) * 2);padding:0 var(--sc-input-spacing-small)}.input--small .input__clear,.input--small .input__password-toggle{margin-right:var(--sc-input-spacing-small)}.input--small .input__prefix ::slotted(*){margin-left:var(--sc-input-spacing-small)}.input--small .input__suffix ::slotted(*){margin-right:var(--sc-input-spacing-small)}.input--small .input__suffix ::slotted(sc-dropdown){margin:0}.input--medium{border-radius:var(--sc-input-border-radius-medium);font-size:var(--sc-input-font-size-medium);height:var(--sc-input-height-medium)}.input--medium .input__control{height:calc(var(--sc-input-height-medium) - var(--sc-input-border-width) * 2);padding:0 var(--sc-input-spacing-medium)}.input--medium .input__clear,.input--medium .input__password-toggle{margin-right:var(--sc-input-spacing-medium)}.input--medium .input__prefix ::slotted(*){margin-left:var(--sc-input-spacing-medium) !important}.input--medium .input__suffix ::slotted(:not(sc-button[size=medium])){margin-right:var(--sc-input-spacing-medium) !important}.input--medium .input__suffix ::slotted(sc-tag){margin-right:var(--sc-input-spacing-small) !important}.input--medium .input__suffix ::slotted(sc-dropdown){margin:3px}.input--large{border-radius:var(--sc-input-border-radius-large);font-size:var(--sc-input-font-size-large);height:var(--sc-input-height-large)}.input--large .input__control{height:calc(var(--sc-input-height-large) - var(--sc-input-border-width) * 2);padding:0 var(--sc-input-spacing-large)}.input--large .input__clear,.input--large .input__password-toggle{margin-right:var(--sc-input-spacing-large)}.input--large .input__prefix ::slotted(*){margin-left:var(--sc-input-spacing-large)}.input--large .input__suffix ::slotted(*){margin-right:var(--sc-input-spacing-large)}.input--large .input__suffix ::slotted(sc-dropdown){margin:3px}.input--pill.input--small{border-radius:var(--sc-input-height-small)}.input--pill.input--medium{border-radius:var(--sc-input-height-medium)}.input--pill.input--large{border-radius:var(--sc-input-height-large)}.input__clear,.input__password-toggle{display:inline-flex;align-items:center;font-size:inherit;color:var(--sc-input-icon-color);border:none;background:none;padding:0;transition:var(--sc-transition-fast) color;cursor:pointer}.input__clear:hover,.input__password-toggle:hover{color:var(--sc-input-icon-color-hover)}.input__clear:focus,.input__password-toggle:focus{outline:none}.input--empty .input__clear{visibility:hidden}.input--squared{border-radius:0}.input--squared-top{border-top-left-radius:0;border-top-right-radius:0}.input--squared-bottom{border-bottom-left-radius:0;border-bottom-right-radius:0}.input--squared-left{border-top-left-radius:0;border-bottom-left-radius:0}.input--squared-right{border-top-right-radius:0;border-bottom-right-radius:0}";const w=y;let C=0;const q=class{constructor(e){t(this,e);this.scChange=i(this,"scChange",7);this.scClear=i(this,"scClear",7);this.scInput=i(this,"scInput",7);this.scFocus=i(this,"scFocus",7);this.scBlur=i(this,"scBlur",7);this.inputId=`phone-input-${++C}`;this.helpId=`phone-input-help-text-${C}`;this.labelId=`phone-input-label-${C}`;this.squared=undefined;this.squaredBottom=undefined;this.squaredTop=undefined;this.squaredLeft=undefined;this.squaredRight=undefined;this.hidden=false;this.size="medium";this.name=undefined;this.value="";this.pill=false;this.label=undefined;this.showLabel=true;this.help="";this.clearable=false;this.togglePassword=false;this.placeholder=undefined;this.disabled=false;this.readonly=false;this.minlength=undefined;this.maxlength=undefined;this.min=undefined;this.max=undefined;this.step=undefined;this.pattern="[-s#0-9_+/().]*";this.required=false;this.invalid=false;this.autocorrect=undefined;this.autocomplete=undefined;this.autofocus=undefined;this.spellcheck=undefined;this.hasFocus=undefined}async reportValidity(){return this.input.reportValidity()}async triggerFocus(t){return this.input.focus(t)}async setCustomValidity(t){this.input.setCustomValidity(t);this.invalid=!this.input.checkValidity()}async triggerBlur(){return this.input.blur()}select(){return this.input.select()}handleBlur(){this.hasFocus=false;this.scBlur.emit()}handleFocus(){this.hasFocus=true;this.scFocus.emit()}handleChange(){this.value=this.input.value;this.scChange.emit()}handleInput(){this.value=this.input.value.replace(/\s/g,"");this.input.value=this.value;this.scInput.emit()}handleClearClick(t){this.value="";this.scClear.emit();this.scInput.emit();this.scChange.emit();this.input.focus();t.stopPropagation()}handleFocusChange(){setTimeout((()=>{this.hasFocus&&this.input?this.input.focus():this.input.blur()}),0)}handleValueChange(){if(this.input){this.invalid=!this.input.checkValidity()}}componentDidLoad(){this.formController=new c(this.el).addFormData();this.handleFocusChange()}disconnectedCallback(){var t;(t=this.formController)===null||t===void 0?void 0:t.removeFormData()}render(){var t;return e(o,{key:"3e08bd4c619c5858c0161d62abda5cd172a47ff5",hidden:this.hidden},e("sc-form-control",{key:"8353fc1ff1688ace7f37d32738ad12712dfa7113",exportparts:"label, help-text, form-control",size:this.size,required:this.required,label:this.label,showLabel:this.showLabel,help:this.help,inputId:this.inputId,helpId:this.helpId,labelId:this.labelId,name:this.name,"aria-label":this.label},e("slot",{key:"f264cfc7f0545a096caba329f31f0353ec265779",name:"label-end",slot:"label-end"}),e("div",{key:"07308b4d593863ee51aabc2fa2671a5ba95477ce",part:"base",class:{input:true,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--focused":this.hasFocus,"input--invalid":this.invalid,"input--disabled":this.disabled,"input--squared":this.squared,"input--squared-bottom":this.squaredBottom,"input--squared-top":this.squaredTop,"input--squared-left":this.squaredLeft,"input--squared-right":this.squaredRight}},e("span",{key:"58ff242d51622b8c27bdb8412df73c7939ae0974",part:"prefix",class:"input__prefix"},e("slot",{key:"687730d21b3508de92b25d09cfdebd351d3211b2",name:"prefix"})),e("slot",{key:"b4d47b91e23319c41867a9a56f45d8d4306b9448"},e("input",{key:"57a79bcaa37699a796570cde234ddabf82710ab4",part:"input",id:this.inputId,class:"input__control",ref:t=>this.input=t,type:"tel",name:this.name,disabled:this.disabled,readonly:this.readonly,required:this.required,placeholder:this.placeholder,minlength:this.minlength,maxlength:this.maxlength,min:this.min,max:this.max,step:this.step,autocomplete:"tel",autocorrect:this.autocorrect,autofocus:this.autofocus,spellcheck:this.spellcheck,pattern:h("surecart/sc-phone-input/pattern",this.pattern),inputmode:"numeric","aria-label":this.label,"aria-labelledby":this.label,"aria-invalid":this.invalid?true:false,value:this.value,onChange:()=>this.handleChange(),onInput:()=>this.handleInput(),onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur()})),e("span",{key:"7eb0393586ab436bd8b2e054275fc748c9dcd7fc",part:"suffix",class:"input__suffix"},e("slot",{key:"6331599b05299a555a84e37228b61fd445c2075c",name:"suffix"})),this.clearable&&((t=this.value)===null||t===void 0?void 0:t.length)>0&&e("button",{key:"e63971fc3d1d4b0b79db4523ebf7fe823d5849d8",part:"clear-button",class:"input__clear",type:"button",onClick:t=>this.handleClearClick(t),tabindex:"-1"},e("slot",{key:"548be8b67853364c1489abdabc1ac0a1d46b4c56",name:"clear-icon"},e("svg",{key:"f73432216a77d1abea80fb0c726ed6105c591460",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},e("line",{key:"583cad29ddb54c8c635d5bb844999152c3c9a9db",x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{key:"832e10c722c251294fbc8a2b958333f39da83a06",x1:"6",y1:"6",x2:"18",y2:"18"})))))))}get el(){return s(this)}static get watchers(){return{hasFocus:["handleFocusChange"],value:["handleValueChange"]}}};q.style=w;const z=":host{display:block;z-index:3;position:relative}";const S=z;const I=class{constructor(e){t(this,e);this.scChange=i(this,"scChange",7);this.scInput=i(this,"scInput",7);this.scInputType=i(this,"scInputType",7);this.scSetState=i(this,"scSetState",7);this.country=undefined;this.show=false;this.type="other";this.number=null;this.status="unknown";this.loading=undefined;this.help=undefined;this.otherLabel=wp.i18n.__("Tax ID","surecart");this.caGstLabel=wp.i18n.__("GST Number","surecart");this.auAbnLabel=wp.i18n.__("ABN Number","surecart");this.gbVatLabel=wp.i18n.__("UK VAT","surecart");this.euVatLabel=wp.i18n.__("EU VAT","surecart");this.taxIdTypes=[];this.required=false}async reportValidity(){return this.input.reportValidity()}onLabelChange(){p.ca_gst.label=this.caGstLabel||p.ca_gst.label;p.au_abn.label=this.auAbnLabel||p.au_abn.label;p.gb_vat.label=this.gbVatLabel||p.gb_vat.label;p.eu_vat.label=this.euVatLabel||p.eu_vat.label;p.other.label=this.otherLabel||p.other.label}componentWillLoad(){this.onLabelChange()}renderStatus(){if(this.status==="valid"){return e("sc-icon",{name:"check",slot:"prefix",style:{color:"var(--sc-color-success-500)"}})}if(this.status==="invalid"){return e("sc-icon",{name:"x",slot:"prefix",style:{color:"var(--sc-color-danger-500)"}})}}filteredZones(){if(!!this.taxIdTypes.length){return Object.keys(p).filter((t=>this.taxIdTypes.includes(t))).reduce(((t,i)=>{t[i]=p[i];return t}),{})}return p}onTaxIdTypesChange(){if(!!this.taxIdTypes.length){this.type=!this.taxIdTypes.includes("other")?this.taxIdTypes[0]:"other"}}getZoneLabel(){var t,i;const e=this.filteredZones()||{};return((t=e===null||e===void 0?void 0:e[(this===null||this===void 0?void 0:this.type)||"other"])===null||t===void 0?void 0:t.label)||((i=e===null||e===void 0?void 0:e[Object.keys(e)[0]])===null||i===void 0?void 0:i.label)}render(){var t,i,s,o,r;return e(n,{key:"e270121fa0488eae217e62e827d4c8fd8af57632"},e("sc-input",{key:"0000aa48f171bc2f9355a1d0b215a056a169fa42",name:"tax_identifier.number_type",required:this.required,value:this.type,style:{display:"none"}}),e("sc-input",{key:"0aa2092d2287f9d607b90ca23d41f0e1b0fa3887",ref:t=>this.input=t,label:this.getZoneLabel(),"aria-label":wp.i18n.__("Tax ID","surecart"),placeholder:wp.i18n.__("Enter Tax ID","surecart"),name:"tax_identifier.number",value:this.number,onScInput:t=>{t.stopImmediatePropagation();this.scInput.emit({number:t.target.value,number_type:this.type||"other"})},onScChange:t=>{t.stopImmediatePropagation();this.scChange.emit({number:t.target.value,number_type:this.type||"other"})},help:this.help,required:this.required},this.loading&&this.type==="eu_vat"?e("sc-spinner",{slot:"prefix",style:{"--spinner-size":"10px"}}):this.renderStatus(),((t=Object.keys(this.filteredZones()||{}))===null||t===void 0?void 0:t.length)===1?e("span",{slot:"suffix"},(s=(i=Object.values(this.filteredZones()||{}))===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s["label_small"]):e("sc-dropdown",{slot:"suffix",position:"bottom-right",role:"select","aria-multiselectable":"false","aria-label":wp.i18n.__("Select number type","surecart")},e("sc-button",{type:"text",slot:"trigger",caret:true,loading:false,style:{color:"var(--sc-input-label-color)"},tabindex:"0"},(r=(o=this.filteredZones())===null||o===void 0?void 0:o[(this===null||this===void 0?void 0:this.type)||"other"])===null||r===void 0?void 0:r.label_small),e("sc-menu",null,Object.keys(this.filteredZones()||{}).map((t=>e("sc-menu-item",{role:"option",onClick:()=>{this.scInput.emit({number:this.number,number_type:t});this.scChange.emit({number:this.number,number_type:t});this.type=t},onKeyDown:i=>{var e;if(i.key==="Enter"){this.scInput.emit({number:this.number,number_type:t});this.scChange.emit({number:this.number,number_type:t});this.type=t;(e=this.input)===null||e===void 0?void 0:e.triggerFocus();u(wp.i18n.sprintf(wp.i18n.__("%s selected","surecart"),p[t].label_small,"assertive"))}},checked:this.type===t,"aria-selected":this.type===t?"true":"false","aria-label":p[t].label_small},p[t].label_small)))))))}static get watchers(){return{otherLabel:["onLabelChange"],caGstLabel:["onLabelChange"],auAbnLabel:["onLabelChange"],gbVatLabel:["onLabelChange"],euVatLabel:["onLabelChange"],taxIdTypes:["onTaxIdTypesChange"]}}};I.style=S;export{m as sc_address,k as sc_checkbox,q as sc_phone_input,I as sc_tax_id_input};
//# sourceMappingURL=p-3f366d88.entry.js.map