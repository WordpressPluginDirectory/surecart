import{r as e,c as t,h as i,a as s}from"./p-e97fde0a.js";import{a as n,c as a,o,f as r,s as c,b as l}from"./p-8c8c3326.js";import{s as d}from"./p-830ab1a3.js";import{i as h}from"./p-b0d8cd6e.js";const f=":host{display:inline-block;--panel-height:75vh;--panel-width:11rem}.dropdown{position:relative}.dropdown.dropdown--open .dropdown__positioner{visibility:visible;opacity:1;transform:scale(1)}.dropdown__trigger{display:block;cursor:pointer;border-width:0;outline:none;background-color:unset}.dropdown--disabled,.dropdown--disabled .dropdown__trigger{cursor:not-allowed}.dropdown__positioner{position:absolute;right:0;width:100%;z-index:var(--sc-z-index-dropdown);opacity:0;visibility:hidden;transform:scale(0.9);min-width:var(--panel-width)}.dropdown__panel{transform-origin:top left;box-shadow:0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);max-height:var(--panel-height);font-family:var(--sc-font-sans);font-size:var(--sc-font-size-medium);font-weight:var(--sc-font-weight-normal);color:var(--color);background-color:var(--sc-panel-background-color);border:solid 1px var(--sc-panel-border-color);border-radius:var(--sc-border-radius-medium);box-shadow:var(--sc-shadow-large);overflow:auto;overscroll-behavior:none;transition:var(--sc-transition-fast) opacity, var(--sc-transition-fast) transform;z-index:5}";const m=f;let u=0;let p="";const b=class{constructor(i){e(this,i);this.scShow=t(this,"scShow",7);this.scHide=t(this,"scHide",7);this.clickEl=undefined;this.disabled=undefined;this.open=false;this.position=undefined;this.placement="bottom-start";this.distance=10;this.skidding=0;this.hoist=false;this.closeOnSelect=true;this.isVisible=undefined}handleOpenChange(){this.open?this.show():this.hide()}handleOutsideClick(e){const t=e.composedPath();if(!t.some((e=>e===this.el))){this.open=false}}startPositioner(){this.stopPositioner();this.updatePositioner();this.positionerCleanup=n(this.trigger,this.positioner,this.updatePositioner.bind(this))}updatePositioner(){if(!this.open||!this.trigger||!this.positioner){return}a(this.trigger,this.positioner,{placement:this.placement,middleware:[o({mainAxis:this.distance,crossAxis:this.skidding}),r(),c(),l({apply:({availableWidth:e,availableHeight:t})=>{Object.assign(this.panel.style,{maxWidth:`${e}px`,maxHeight:`${t}px`})},padding:8})],strategy:this.hoist?"fixed":"absolute"}).then((({x:e,y:t,placement:i})=>{this.positioner.setAttribute("data-placement",i);Object.assign(this.positioner.style,{position:this.hoist?"fixed":"absolute",left:`${e}px`,top:`${t}px`,right:"auto"})}))}stopPositioner(){if(this.positionerCleanup){this.positionerCleanup();this.positionerCleanup=undefined;this.positioner.removeAttribute("data-placement")}}show(){d(wp.i18n.__("Menu Selection Dropdown opened. Press Up/Down arrow to toggle between menu items.","surecart"),"assertive");this.scShow.emit();if(this.isVisible){return}this.isVisible=true;this.open=true;this.startPositioner();this.panel.focus()}hide(){d(wp.i18n.__("Menu Selection Dropdown closed.","surecart"),"assertive");this.scHide.emit();if(!this.isVisible){return}this.stopPositioner();this.isVisible=false;this.open=false;const e=this.el.shadowRoot.querySelector('slot[name="trigger"]');const t=e.assignedElements({flatten:true})[0];t.focus()}handleClick(e){if(this.closeOnSelect){const t=e.composedPath();if(t.some((e=>e.classList&&e.classList.contains("menu-item")))){this.open=false}}}componentWillLoad(){document.addEventListener("mousedown",(e=>this.handleOutsideClick(e)))}getMenu(){let e=this.el.shadowRoot.querySelector("slot");return e.assignedNodes().find((e=>e.nodeName==="sc-menu"))}getItems(){return[...this.el.querySelectorAll("sc-menu-item")]}handleHide(){this.open=false;u=0;this.trigger.focus()}handleKeyDown(e){const t=this.getItems();if(e.key==="Tab"){if(this.open){this.handleHide()}return}if(["ArrowDown","ArrowUp"].includes(e.key)){e.preventDefault();e.stopImmediatePropagation();if(!this.open){this.open=true}if(e.key==="ArrowDown"){if(p=="up"){u=u+2}if(u>t.length-1){u=0}t[u].setFocus();p="down";u++;return}if(e.key==="ArrowUp"){if(p=="down"){u=u-2}if(u<0){u=t.length-1}t[u].setFocus();p="up";u--;return}}if(e.key==="Escape"){if(this.open){this.handleHide()}return}if(e.key==="Enter"){if(this.open){this.handleHide()}else{e.stopImmediatePropagation();e.preventDefault();this.open=true}}if(e.ctrlKey||e.metaKey){return}}render(){return i("div",{key:"c8392adf4429184f21da6fe986ebaceff5c295db",part:"base",class:{dropdown:true,"dropdown--open":this.open,"dropdown--disabled":this.disabled}},i("span",{key:"c0bf8a49ba1d998de69ab4ac8923aa2dd6eb3062",part:"trigger",class:"dropdown__trigger",ref:e=>this.trigger=e,onClick:()=>{if(this.disabled)return;if(this.open){this.hide()}else{setTimeout((()=>{this.show()}),0)}},"aria-expanded":this.open?"true":"false","aria-haspopup":"true"},i("slot",{key:"51b67860ab34736e52d5c05dfecab6ba42e7239a",name:"trigger"})),i("div",{key:"1ba81b6ef95a43545f204dea32dff6a1533d792f",class:"dropdown__positioner",ref:e=>this.positioner=e},i("div",{key:"3078f77dd9cfbb8da6411661e4d49028d94e14be",part:"panel",class:{dropdown__panel:true,"position--top-left":this.position==="top-left","position--top-right":this.position==="top-right","position--bottom-left":this.position==="bottom-left","position--bottom-right":this.position==="bottom-right"},"aria-orientation":"vertical",tabindex:"-1",onClick:e=>this.handleClick(e),ref:e=>this.panel=e},i("slot",{key:"a252660dc11c19bde14a5496ec4a3300d0054ea0"}))))}get el(){return s(this)}static get watchers(){return{open:["handleOpenChange"]}}};b.style=m;const g=":host{display:block}.menu{padding:var(--sc-spacing-x-small) 0}.menu:focus{outline:none}::slotted(sc-input){margin-top:-var(--sc-spacing-x-small)}::slotted(sc-divider){--spacing:var(--sc-spacing-x-small)}";const w=g;const v=class{constructor(i){e(this,i);this.scSelect=t(this,"scSelect",7);this.items=[];this.ariaLabel=undefined}handleClick(e){const t=e.target;const i=t.closest("sc-menu-item");if(i&&!i.disabled){this.scSelect.emit({item:i})}}handleKeyDown(e){if(e.key==="Enter"){const t=this.getCurrentItem();e.preventDefault();if(t){this.scSelect.emit({item:t})}d(wp.i18n.sprintf(wp.i18n.__("Menu %s selected","surecart"),t.textContent),"assertive")}if(e.key===" "){e.preventDefault()}if(["ArrowDown","ArrowUp","Home","End"].includes(e.key)){const t=this.getCurrentItem();let i=t?this.items.indexOf(t):0;if(this.items.length){e.preventDefault();if(e.key==="ArrowDown"){i++}else if(e.key==="ArrowUp"){i--}else if(e.key==="Home"){i=0}else if(e.key==="End"){i=this.items.length-1}if(i<0)i=0;if(i>this.items.length-1)i=this.items.length-1;this.setCurrentItem(this.items[i]);return}}}getCurrentItem(){return this.items.find((e=>e.getAttribute("tabindex")==="0"))}async setCurrentItem(e){const t=e.disabled?this.items[0]:e;this.items.forEach((e=>{e.setAttribute("tabindex",e===t?"0":"-1")}))}syncItems(){const e=this.el.shadowRoot.querySelector("slot").assignedElements({flatten:true});this.items=e.filter((e=>e.nodeName==="sc-menu-item"))}handleSlotChange(){this.syncItems()}render(){return i("div",{key:"8f6e1edaa2d608daba28258c2951e8478f55db95",part:"base",class:"menu",tabindex:"0",onKeyDown:e=>this.handleKeyDown(e)},i("slot",{key:"bb594eb07667a326b60e0f5f2d920d32f67b0169",onSlotchange:()=>this.handleSlotChange()}))}get el(){return s(this)}};v.style=w;const x=":host{display:block}.menu-item{position:relative;display:flex;align-items:stretch;font-family:var(--sc-font-sans);font-size:var(--sc-font-size-medium);font-weight:var(--sc-font-weight-normal);line-height:var(--sc-menu-item-line-height, var(--sc-line-height-normal));letter-spacing:var(--sc-letter-spacing-normal);text-align:left;color:var(--sc-menu-item-color, var(--sc-color-gray-700));padding:var(--sc-spacing-xx-small) var(--sc-spacing-x-large);transition:var(--sc-input-transition, var(--sc-transition-medium)) fill, var(--sc-input-transition, var(--sc-transition-medium)) background-color;user-select:none;white-space:var(--sc-menu-item-white-space, nowrap);text-wrap:auto;cursor:pointer;text-decoration:none}.menu-item.menu-item--focused:not(.menu-item--disabled){outline:none;background-color:var(--sc-menu-item-background-focused, var(--sc-color-primary-500));color:var(--sc-color-white)}.menu-item.menu-item--disabled{outline:none;color:var(--sc-color-gray-400);cursor:not-allowed}.menu-item .menu-item__label{flex:1 1 auto}.menu-item .menu-item__prefix{flex:0 0 auto;display:flex;align-items:center}.menu-item .menu-item__prefix ::slotted(*){display:inline-flex;margin-right:var(--sc-spacing-small)}.menu-item .menu-item__suffix{flex:0 0 auto;display:flex;align-items:center}.menu-item .menu-item__suffix ::slotted(*){margin-left:var(--sc-spacing-x-small);text-align:right}.menu-item .menu-item__check{display:flex;position:absolute;left:0.5em;top:0.6em;visibility:hidden;align-items:center;font-size:inherit}.menu-item--checked .menu-item__check{visibility:visible}.menu-item--is-rtl.menu-item{text-align:right}.menu-item--is-rtl.menu-item .menu-item__check{left:auto;right:0.5em}";const y=x;const _=class{constructor(t){e(this,t);this.hasFocus=false;this.href=undefined;this.target=undefined;this.checked=false;this.value="";this.disabled=false}async setFocus(e){this.menuItem.focus(e)}async setBlur(){this.menuItem.blur()}handleBlur(){this.hasFocus=false}handleFocus(){this.hasFocus=true}render(){const e=this.href?"a":"div";return i(e,{key:"9006780c90872153a6bcc8751146a9d68e41beca",ref:e=>this.menuItem=e,part:"base",class:{"menu-item":true,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--focused":this.hasFocus,"menu-item--is-rtl":h()},href:this.href,role:"menuitem","aria-disabled":this.disabled?"true":"false","aria-checked":this.checked?"true":"false",tabindex:!this.disabled?"0":undefined,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onMouseEnter:()=>this.handleFocus(),onMouseLeave:()=>this.handleBlur(),onKeyDown:e=>{if(e.key===" "||e.key==="Spacebar"||e.key==="Enter"){this.menuItem.click()}},"aria-label":this.el.innerText,target:this.target},i("span",{key:"8f7d72e3af18bfcab1d15f05a76b690b06f3d35e",part:"checked-icon",class:"menu-item__check"},i("svg",{key:"a9ac3ab925952730053d01cb04f33b26117070f6",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-check",viewBox:"0 0 16 16"},i("path",{key:"70567f10492b1996c97f52f7fc3ba72d4012c2d0",d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"}))),i("span",{key:"08f4cbe26b685f9fb9d0f9b4ef07cbd91cb2319e",part:"prefix",class:"menu-item__prefix"},i("slot",{key:"23d7c90823cbb82b2647a6b1a0e85d7f4bd74494",name:"prefix"})),i("span",{key:"4fec673a92e6524155dbc44228815c0dec861884",part:"label",class:"menu-item__label"},i("slot",{key:"08abc066c7381d3ba73d2307f01101e14a0c7e96"})),i("span",{key:"b1f5b67d85fd8941c895491afb2994bc6273d1bf",part:"suffix",class:"menu-item__suffix"},i("slot",{key:"17a3e8236a5a6701d26887d7838d9b0873279f91",name:"suffix"})))}get el(){return s(this)}};_.style=y;export{b as sc_dropdown,v as sc_menu,_ as sc_menu_item};
//# sourceMappingURL=p-e2c75222.entry.js.map