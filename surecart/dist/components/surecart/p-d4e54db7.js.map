{"version":3,"names":["razorpayInstance","loadPromise","wp","i18n","__"],"sources":["src/functions/razorpay.ts"],"sourcesContent":["/**\n * WordPress dependencies.\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies.\n */\nimport { RazorpayConstructor } from '../types';\n\n/**\n * Razorpay Checkout JS SDK URL.\n */\nexport const RAZORPAY_CHECKOUT_SCRIPT_URL = 'https://checkout.razorpay.com/v1/checkout.js';\n\n/**\n * Cached Razorpay instance and load promise for singleton pattern.\n */\nlet razorpayInstance: RazorpayConstructor | null = null;\nlet loadPromise: Promise<RazorpayConstructor> | null = null;\n\n/**\n * Load Razorpay SDK script.\n * Uses singleton pattern to avoid loading the script multiple times.\n *\n * @returns Promise that resolves to the Razorpay constructor.\n */\nexport const loadRazorpay = (): Promise<RazorpayConstructor> => {\n  if (razorpayInstance) {\n    return Promise.resolve(razorpayInstance);\n  }\n\n  if (loadPromise) {\n    return loadPromise;\n  }\n\n  loadPromise = new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.src = RAZORPAY_CHECKOUT_SCRIPT_URL;\n    script.async = true;\n    script.onload = () => {\n      razorpayInstance = (window as any).Razorpay;\n      resolve(razorpayInstance);\n    };\n    script.onerror = () => {\n      loadPromise = null; // Reset so it can be retried.\n      reject(new Error(__('Failed to load Razorpay script.', 'surecart')));\n    };\n    document.head.appendChild(script);\n  });\n\n  return loadPromise;\n};\n"],"mappings":"uDAkBA,IAAAA,EAAA,KACA,IAAAC,EAAA,K,yNA2BuBC,GAAAC,KAAAC,GAAE,iD","ignoreList":[]}