import{h}from"@stencil/core";import{__}from"@wordpress/i18n";import apiFetch from"../../../../functions/fetch";export class ScWordPressPasswordEdit{constructor(){this.heading=void 0,this.successUrl=void 0,this.user=void 0,this.loading=void 0,this.error=void 0,this.enableValidation=!0}renderEmpty(){return h("slot",{name:"empty"},__("User not found.","surecart"))}validatePassword(e){return!!new RegExp("^(?=.*?[#?!@$%^&*-]).{6,}$").test(e)}async handleSubmit(e){this.loading=!0,this.error="";try{const{password:s}=await e.target.getFormJson();await apiFetch({path:"wp/v2/users/me",method:"PATCH",data:{password:s,meta:{default_password_nag:!1}}}),this.successUrl?window.location.assign(this.successUrl):this.loading=!1}catch(e){this.error=(null==e?void 0:e.message)||__("Something went wrong","surecart"),this.loading=!1}}render(){return h("sc-dashboard-module",{key:"86bd38dff33fdf158717ed5b82e902e39a0c91e3",class:"customer-details",error:this.error},h("span",{key:"314d4796a60ee2a836e84e7331c882981bbaa9ac",slot:"heading"},this.heading||__("Update Password","surecart")," "),h("slot",{key:"60a1b840112fdefc6ffd31d7137b17cf53690590",name:"end",slot:"end"}),h("sc-card",{key:"5838fc46f9d6c9f0fbadaace7daef75ca6271ea1"},h("sc-form",{key:"921b186b07c093217ed7c838cb02763957d8e677",onScFormSubmit:e=>this.handleSubmit(e)},h("sc-password",{key:"9d8e66381add0e2d0371883c68faf3f6f49a94cb",enableValidation:this.enableValidation,label:__("New Password","surecart"),name:"password",confirmation:!0,required:!0}),h("div",{key:"8ef0a2af206d4b6ea2ac5b9c6db418d1d3dd5a50"},h("sc-button",{key:"2d3be1e6f49d25fdbcc4b8b97e9afc52a1b587dd",type:"primary",full:!0,submit:!0},__("Update Password","surecart"))))),this.loading&&h("sc-block-ui",{key:"76f3f8a7318499acfc8dbd60acb2c2b61147a4d0",spinner:!0}))}static get is(){return"sc-wordpress-password-edit"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-wordpress-password-edit.css"]}}static get styleUrls(){return{$:["sc-wordpress-password-edit.css"]}}static get properties(){return{heading:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"heading",reflect:!1},successUrl:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"success-url",reflect:!1},user:{type:"unknown",mutable:!1,complexType:{original:"WordPressUser",resolved:"WordPressUser",references:{WordPressUser:{location:"import",path:"../../../../types",id:"src/types.ts::WordPressUser"}}},required:!1,optional:!1,docs:{tags:[],text:""}},enableValidation:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Ensures strong password validation."},attribute:"enable-validation",reflect:!0,defaultValue:"true"}}}static get states(){return{loading:{},error:{}}}}