{"version":3,"file":"razorpay.js","sourceRoot":"","sources":["../../src/functions/razorpay.ts"],"names":[],"mappings":"AAAA;;GAEG;AACH,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AAOrC;;GAEG;AACH,MAAM,CAAC,MAAM,4BAA4B,GAAG,8CAA8C,CAAC;AAE3F;;GAEG;AACH,IAAI,gBAAgB,GAA+B,IAAI,CAAC;AACxD,IAAI,WAAW,GAAwC,IAAI,CAAC;AAE5D;;;;;GAKG;AACH,MAAM,CAAC,MAAM,YAAY,GAAG,GAAiC,EAAE;IAC7D,IAAI,gBAAgB,EAAE,CAAC;QACrB,OAAO,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;IAC3C,CAAC;IAED,IAAI,WAAW,EAAE,CAAC;QAChB,OAAO,WAAW,CAAC;IACrB,CAAC;IAED,WAAW,GAAG,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QAC5C,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,MAAM,CAAC,GAAG,GAAG,4BAA4B,CAAC;QAC1C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;QACpB,MAAM,CAAC,MAAM,GAAG,GAAG,EAAE;YACnB,gBAAgB,GAAI,MAAc,CAAC,QAAQ,CAAC;YAC5C,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAC5B,CAAC,CAAC;QACF,MAAM,CAAC,OAAO,GAAG,GAAG,EAAE;YACpB,WAAW,GAAG,IAAI,CAAC,CAAC,8BAA8B;YAClD,MAAM,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC,iCAAiC,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,CAAC;QACF,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACpC,CAAC,CAAC,CAAC;IAEH,OAAO,WAAW,CAAC;AACrB,CAAC,CAAC","sourcesContent":["/**\n * WordPress dependencies.\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies.\n */\nimport { RazorpayConstructor } from '../types';\n\n/**\n * Razorpay Checkout JS SDK URL.\n */\nexport const RAZORPAY_CHECKOUT_SCRIPT_URL = 'https://checkout.razorpay.com/v1/checkout.js';\n\n/**\n * Cached Razorpay instance and load promise for singleton pattern.\n */\nlet razorpayInstance: RazorpayConstructor | null = null;\nlet loadPromise: Promise<RazorpayConstructor> | null = null;\n\n/**\n * Load Razorpay SDK script.\n * Uses singleton pattern to avoid loading the script multiple times.\n *\n * @returns Promise that resolves to the Razorpay constructor.\n */\nexport const loadRazorpay = (): Promise<RazorpayConstructor> => {\n  if (razorpayInstance) {\n    return Promise.resolve(razorpayInstance);\n  }\n\n  if (loadPromise) {\n    return loadPromise;\n  }\n\n  loadPromise = new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.src = RAZORPAY_CHECKOUT_SCRIPT_URL;\n    script.async = true;\n    script.onload = () => {\n      razorpayInstance = (window as any).Razorpay;\n      resolve(razorpayInstance);\n    };\n    script.onerror = () => {\n      loadPromise = null; // Reset so it can be retried.\n      reject(new Error(__('Failed to load Razorpay script.', 'surecart')));\n    };\n    document.head.appendChild(script);\n  });\n\n  return loadPromise;\n};\n"]}